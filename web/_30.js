
importScripts('/_448.js');
function _968(_585, _969, _970, _971)
{
	
	function _972(_445)
	{
		return _445._973 * _445._974;
	}
	function _975(_445)
	{
		return _445._973;
	}
	let _976=new Object();
	_976._871="start";
	postMessage(_976);
	let _977;
	let _978;
	for(let _979=0;_979<2;_979++)
	{
		if(_979==1)
			_977 = new Float64Array(_978);
		else
			_977=null;
		_978=0;
		let _980=new Array();
		function _981(_982,_983,_984)
		{
			let _985;
			_985=new Object();
			_985._982=_982;
			_985._983=_983;
			_985._984=_984;
			_980.push(_985);
		}
		function _986()
		{
			let _987;
			_987=0;
			for(let _988=0;_988<_980.length;_988++)
			{
				let _985;
				_985=_980[_988];
				let _984;
				_984=_985._984;
				_987+=_985._982[_985._983]*_984;
				_985._983++;
				if(_985._983>=_985._982.length)
				{
					_980.splice(_988,1);
					_988--;
				}
			}
			return _987;
		}
		function _989(_754,_990)
		{
			if(_990<-1)
				_990=-1;
			if(_990>1)
				_990 = 1;
			if (_977)
				_977[_754] = _990;
		}
		let _991;
		for(let _620=0;_620<_585.length;_620++)
		{
			let _992 = _585[_620];
			_991 = _992._993;
			let _994, _995, _996;
			_994 = _972(_992);
			_995 = _975(_992);
			_996 = _992._974;
			let _997;
			_997 = _992._998;
			let _999;
			_999 = _992._1000;
			_976._871="progress";
			_976._1001=_585.length*_979+_620;
			_976._1002=_585.length*2;
			postMessage(_976);
			let _1003, _1004, _1005, _1006, _1007;
			{
				let _510 = _971[_620];
				_1003 = _510._1008;
				_1004 = _510._1009;
				_1005 = _510._443;
				_1006 = _510._878;
				_1007 = _510._879;
			}
			let _1010;
			_1010 = _970[_620]._1010;
			if (!_1011._1012(_992,_969))
				continue;
			let _1013;
			_1013 = _970[_620]._1014;
			for (let _1015 = 0; _1015 < _1013; _1015++)
			{
				let _1016;
				if (_1003 == null || _1015 >= _1003.length)
					_1016 = 0;
				else
					_1016 = _1003[_1015];
				let _1017;
				if (_1004 == null || _1015 >= _1004.length)
					_1017 = 0;
				else
					_1017 = _1004[_1015];
				let _1018;
				_1018 = _1015 + _1010;
				let _1019;
				if (_1005 == null || _1018 < 0 || _1018 >= _1005.length)
					_1019 = 0;
				else
					_1019 = _1005[_1018];
				let _1020;
				if (_1006 == null || _1015 >= _1006.length)
					_1020 = 0;
				else
					_1020 = _1006[_1015];
				let _1021;
				if (_1007 == null || _1015 >= _1007.length)
					_1021 = 0;
				else
					_1021 = _1007[_1015];
				let _1022;
				_1022 = _986();
				let _990;
				switch (_969)
				{
					case "vocal":
						_990 = _1016 * _994 + _1017 * _995;
						break;
					case "modification":
						_990 = _1019 + _1022;
						break;
					case "beat":
						_990 = _1020 * _997 + _1021 * _999;
						break;
					case "instrument":
						_990 = _1019 * _991 + _1022 + _1020 * _997 + _1021 * _999;
						break;
					case "vocal and instrument":
						_990 = _1016 * _994 + _1017 * _995 + _1019 * _991 + _1022 + _1020 * _997 + _1021 * _999;
						break;
				}
				_989(_978,_990);
				_978++;
			}
			if (_1005 && _1005.length - _1010 > _1013)
			{
				let _1023;
				if (_969 == "modification")
					_1023 = 1;
				else
					_1023 = _991;
				_981(_1005, _1013, _1023);
			}
		}
		while(_980.length)
		{
			let _1024;
			_1024=_986();
			if (_969 == "vocal" || _969 == "beat")
				_1024=0;
			_989(_978,_1024);
			_978++;
		}
	}
	_976._871="end";
	_976._977 =_977;
	postMessage(_976);
}

onmessage=function(_976)
{
	_968(_976.data._585, _976.data._969, _976.data._970, _976.data._971);
}

